{"version":3,"sources":["scripts.js","collaborators.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scripts.js","sourcesContent":["window.HELIX = {\r\n  html: $('html'),\r\n  body: $('body'),\r\n  env: {\r\n    url: $('html').data('url'),\r\n    // token: $('html').data('token')\r\n  }\r\n};\r\n\r\n$(\".url-field\").change(function() {\r\n    if (!/^https*:\\/\\//.test(this.value)) {\r\n        this.value = \"http://\" + this.value;\r\n    }\r\n});\r\n\r\n$(\".datepicker\").keyup(function(){\r\n    if ($(this).val().length == 2){\r\n        $(this).val($(this).val() + \"/\");\r\n    }else if ($(this).val().length == 5){\r\n        $(this).val($(this).val() + \"/\");\r\n    }\r\n});\r\n\r\n// Append the hidden input and tr whenever user adds new collaborator\r\n$(\"#addCollabBtn\").on('click',function(e){\r\n\te.preventDefault();\r\n\tvar error = $('#collab').siblings('strong');\r\n\r\n\tif($('#collab option:selected').length == 0)\r\n\t{\r\n\t\treturn error.text('Choose a faculty member to add.');\r\n\t}\r\n\telse if($('#list tbody tr[data-id*=\"'+ $('#collab option:selected').val() +'\"]').length == 1)\r\n\t{\r\n\t\treturn error.text('This person has already been added as a collaborator.');\r\n\t}\r\n\telse if($('#roleID option:selected').val() == 'Lead Principal Investigator' && $('#list tbody tr[data-id*=\"Lead Principal Investigator\"]').length >= 1)\r\n\t{\r\n\t\treturn error.text('Lead Principal Investigator cannot be included more than once.');\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$('#collab').siblings('strong').text('');\r\n\t}\r\n\r\n\tvar displayName = $(\"#collab option:selected\").val() == $('#auid').val() ? $('#collab option:selected').text() + '<span style=\"opacity: .5;\"> &#183 You</span> ' : $('#collab option:selected').text(),\r\n\ttemplate = \"<tr data-id='\"+ $(\"#collab option:selected\").text() + ',' + $(\"#collab option:selected\").val() + ',' + $(\"#roleID option:selected\").val() +\"'><td>\" + displayName + \"</td><td>\" + $(\"#roleID option:selected\").text() + \"</td><td> Pending </td><td style='text-align: center;'> <a class='removeCollabBtn'> Cancel </a> </td></tr>\";\r\n\r\n\t$('<input/>', {\r\n\t\tvalue: $(\"#collab option:selected\").text() + ',' + $(\"#collab option:selected\").val() + ',' + $(\"#roleID option:selected\").val(),\r\n\t\tname: 'collaborators[]',\r\n\t\ttype: 'hidden'\r\n\r\n\t}).appendTo($('.project-create-form'));\r\n\r\n\t$(template).appendTo(\"#list tbody\");\r\n})\r\n\r\n// Remove the tr and hidden input whenever a user removes the collaborator from the list\r\n$(\"#list tbody\").on('click', '.removeCollabBtn', function(e){\r\n\te.preventDefault();\r\n\t$('input[value=\"'+ $(this).parents('tr').attr('data-id') +'\"]').remove();\r\n\t$(this).parents('tr').remove();\r\n})\r\n\r\nvar collaborators = $(\".select2-collaborator\");\r\n$( \".select2-collaborator\" ).select2({     \r\n\twidth:'100%', \r\n    ajax: {\r\n    \turl: window.HELIX.env.url + \"/api/collaborators\",\r\n        dataType: 'json',\r\n        delay: 250,\r\n        data: function (params) {\r\n            return {\r\n                q: params.term // search term\r\n            };\r\n        },\r\n        processResults: function (data) {\r\n            return {\r\n                results: data\r\n            };\r\n        },\r\n        cache: true\r\n    },\r\n    placeholder: 'Search for faculty members...',\r\n    minimumInputLength: 3\r\n});\r\n\r\n$('.select2-roles').select2({\r\n\twidth:'95%',\r\n\tminimumResultsForSearch: Infinity,\r\n\tplaceholder: 'Select a role...'\r\n})\r\n\t\r\n\t$('.select2-category').change(function(event){\r\n\t\tvar loadingScreen = $('#loading__screen');\r\n\r\n\t\tloadingScreen.css({\r\n\t\t\t'position': 'fixed',\r\n\t\t\t'top': '0',\r\n\t\t\t'bottom': '0',\r\n\t\t\t'left': '0',\r\n\t\t\t'right': '0',\r\n\t\t\t'z-index': '5',\r\n\t\t\t'opacity': '.7',\r\n\t\t\t'background': '#fff'\r\n\t\t})\r\n\t\t.html('<i class=\"fa fa-spinner fa-pulse fa-3x fa-fw\" style=\"color: #4a4a4a; position: absolute; top: 40%; left: 50%; margin-left: -25px;\"></i>')\r\n\t\t.show();\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: window.HELIX.env.url + '/api/interests/categories/' + event.target.value + '?type=' + $(this).attr('data-type')\r\n\t\t})\r\n\t\t.done(function(request){\r\n\t\t\tvar tags = $('.tags option:selected');\r\n\r\n\t\t\tswitch(request.type)\r\n\t\t\t{\r\n\t\t\t\tcase 'category':\r\n\t\t\t\t\tvar subcategoryList = '', tagList = '';\r\n\r\n\t\t\t\t\tfor(var i = 0; i < request.subcategories.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsubcategoryList += \"<option value='\" + request.subcategories[i].id+\"'>\" + request.subcategories[i].title + \"</option>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var y = 0; y < request.tags.length; y++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttagList += \"<option value='\" + request.tags[y].id+\"'>\" + request.tags[y].title + \"</option>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$('.subcategory').html(subcategoryList);\r\n\t\t\t\t\t$('.tags').html(tagList).append(tags);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'subcategory':\r\n\t\t\t\t\tvar tagList = '';\r\n\r\n\t\t\t\t\tfor (var i = 0; i < request.tags.length; i++) \r\n\t\t\t\t\t{\t\t\t\r\n\t\t\t\t\t\ttagList += \"<option value='\" + request.tags[i].id+\"'>\" + request.tags[i].title + \"</option>\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$('.tags').html(tagList).append(tags);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t})\r\n\t\t.fail(function(){\r\n\t\t\talert('There was an error loading the project interests. Please try again.');\r\n\t\t})\r\n\t\t.always(function(){\r\n\t\t\tloadingScreen.hide();\r\n\t\t});\r\n\t});\r\n\r\n\r\n\r\n\t\r\n// sourceMappingURL=scripts.js.map","/*\r\n| Used for step 3 - Add Collaborators\r\n*/\r\n$('.collaboratorActionBtn').on('click', function(e){\r\n\te.preventDefault();\r\n\r\n\tif($('#loading__screen').length == 0)\r\n\t{\r\n\t\t$('<div/>', {\r\n\t\t\tid: 'loading__screen'\r\n\t\t})\r\n\t\t.css({\r\n\t\t\t'position': 'fixed',\r\n\t\t\t'top': '0',\r\n\t\t\t'bottom': '0',\r\n\t\t\t'left': '0',\r\n\t\t\t'right': '0',\r\n\t\t\t'z-index': '5',\r\n\t\t\t'opacity': '.7',\r\n\t\t\t'background': '#fff'\r\n\t\t})\r\n\t\t.html('<div style=\"color: #4a4a4a; position: absolute; top: 40%; left: 50%; margin-left: -35px; font-weight: bold;\">One moment...</div>')\r\n\t\t.appendTo($('body'));\r\n\t}\r\n\telse\r\n\t{\r\n\t\t$('#loading__screen').show();\r\n\t}\r\n\r\n\t$.ajax({\r\n\t\turl: $(this).data('url'),\r\n\t\tcontext: this\r\n\t})\r\n\t.done(function(){\r\n\t\tswitch($(this).text())\r\n\t\t{\r\n\t\t\tcase 'Approve':\r\n\t\t\t\t$(this).parent().prev().text('Active');\r\n\t\t\t\t$(this).removeClass('collaboratorActionBtn').addClass('removeCollabBtn').text('Remove');\r\n\r\n\t\t\t\t$('<input/>', {\r\n\t\t\t\t\ttype: 'hidden',\r\n\t\t\t\t\tname: 'collaborators[]',\r\n\t\t\t\t\tvalue: $(this).parents('tr').data('id'),\r\n\t\t\t\t}).appendTo($('.project-create-form'));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'Cancel Invite':\r\n\t\t\t\t$(this).parents('tr').remove();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t})\r\n\t.fail(function(response){\r\n\t\tvar error = 'There was an error performing this action.';\r\n\r\n\t\tif(response.status == 403)\r\n\t\t{\r\n\t\t\terror = response.responseJSON[0];\r\n\t\t}\r\n\r\n\t\tswitch($(this).text())\r\n\t\t{\r\n\t\t\tcase 'Approve':\r\n\t\t\t\talert(error);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 'Cancel Invite':\r\n\t\t\t\talert(error);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t})\r\n\t.always(function(){\r\n\t\t$('#loading__screen').hide();\r\n\t});\r\n})"]}